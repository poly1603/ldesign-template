{"version":3,"file":"TemplateSelector.vue2.js","sources":["../../src/components/TemplateSelector.vue"],"sourcesContent":["<script setup lang=\"ts\">\r\nimport type { DeviceType } from '../types'\r\nimport { computed, inject, ref, type Ref, watch } from 'vue'\r\nimport { useTemplateList } from '../composables'\r\nimport { getLocale } from '../locales'\r\nimport { useTemplatePlugin } from '../plugin/useTemplatePlugin'\r\n\r\ninterface Props {\r\n  category: string\r\n  device: DeviceType\r\n  currentTemplate: string\r\n}\r\n\r\nconst props = defineProps<Props>()\r\n\r\nconst emit = defineEmits<{\r\n  select: [templateName: string]\r\n}>()\r\n\r\n// 状态\r\nconst expanded = ref(false)\r\n\r\n// 获取语言配置\r\nconst plugin = useTemplatePlugin()\r\nconst locale = plugin?.currentLocale || inject<Ref<string>>('locale', ref('zh-CN'))\r\nconst messages = computed(() => {\r\n  const localeValue = typeof locale.value === 'string' ? locale.value : 'zh-CN'\r\n  return getLocale(localeValue)\r\n})\r\n\r\n// 获取当前分类和设备下的所有模板\r\nconst { templates: allTemplates } = useTemplateList()\r\n\r\nconst templates = computed(() => {\r\n  return allTemplates.value.filter(\r\n    t => t.category === props.category && t.device === props.device\r\n  )\r\n})\r\n\r\nconst deviceLabel = computed(() => {\r\n  return messages.value.device[props.device] || props.device\r\n})\r\n\r\n// 切换展开状态\r\nconst toggleExpanded = () => {\r\n  expanded.value = !expanded.value\r\n}\r\n\r\n// 选择模板\r\nconst selectTemplate = (templateName: string) => {\r\n  emit('select', templateName)\r\n  expanded.value = false\r\n}\r\n\r\n// 设备切换时自动收起\r\nwatch(() => props.device, () => {\r\n  expanded.value = false\r\n})\r\n</script>\r\n\r\n<template>\r\n  <div class=\"template-selector\" :class=\"{ expanded }\">\r\n    <!-- 切换按钮 -->\r\n    <button class=\"toggle-btn\" :title=\"expanded ? messages.actions.clearCache : messages.actions.selectTemplate\" @click=\"toggleExpanded\">\r\n      <svg v-if=\"!expanded\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\">\r\n        <path d=\"M4 6h16M4 12h16M4 18h16\" stroke-width=\"2\" stroke-linecap=\"round\" />\r\n      </svg>\r\n      <svg v-else width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\">\r\n        <path d=\"M6 18L18 6M6 6l12 12\" stroke-width=\"2\" stroke-linecap=\"round\" />\r\n      </svg>\r\n    </button>\r\n\r\n    <!-- 选择器面板 -->\r\n    <div v-if=\"expanded\" class=\"selector-panel\">\r\n      <div class=\"panel-header\">\r\n        <h3>{{ messages.actions.selectTemplate }}</h3>\r\n        <div class=\"current-info\">\r\n          <span class=\"badge\">{{ deviceLabel }}</span>\r\n          <span class=\"badge\">{{ messages.category[category] || category }}</span>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"template-list\">\r\n        <div\r\n          v-for=\"template in templates\"\r\n          :key=\"template.name\"\r\n          class=\"template-item\"\r\n          :class=\"{ active: template.name === currentTemplate }\"\r\n          @click=\"selectTemplate(template.name)\"\r\n        >\r\n          <div class=\"template-name\">\r\n            {{ template.displayName }}\r\n            <span v-if=\"template.isDefault\" class=\"default-badge\">{{ messages.device.desktop === '桌面端' ? '默认' : 'Default' }}</span>\r\n          </div>\r\n          <div v-if=\"template.description\" class=\"template-desc\">\r\n            {{ template.description }}\r\n          </div>\r\n        </div>\r\n\r\n        <div v-if=\"templates.length === 0\" class=\"empty-state\">\r\n          {{ messages.messages.noTemplates }}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<style scoped>\r\n.template-selector {\r\n  position: fixed;\r\n  top: 20px;\r\n  right: 20px;\r\n  z-index: 9999;\r\n}\r\n\r\n.toggle-btn {\r\n  width: 48px;\r\n  height: 48px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  background: rgba(102, 126, 234, 0.95);\r\n  color: white;\r\n  border: none;\r\n  border-radius: 50%;\r\n  cursor: pointer;\r\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\r\n  transition: all 0.3s;\r\n}\r\n\r\n.toggle-btn:hover {\r\n  background: rgba(102, 126, 234, 1);\r\n  transform: scale(1.1);\r\n  box-shadow: 0 6px 16px rgba(0, 0, 0, 0.2);\r\n}\r\n\r\n.template-selector.expanded .toggle-btn {\r\n  background: #f56c6c;\r\n}\r\n\r\n.selector-panel {\r\n  position: absolute;\r\n  top: 60px;\r\n  right: 0;\r\n  width: 320px;\r\n  max-height: 500px;\r\n  background: white;\r\n  border-radius: 12px;\r\n  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.15);\r\n  overflow: hidden;\r\n  animation: slideIn 0.3s ease;\r\n}\r\n\r\n@keyframes slideIn {\r\n  from {\r\n    opacity: 0;\r\n    transform: translateY(-10px);\r\n  }\r\n  to {\r\n    opacity: 1;\r\n    transform: translateY(0);\r\n  }\r\n}\r\n\r\n.panel-header {\r\n  padding: 16px;\r\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\r\n  color: white;\r\n}\r\n\r\n.panel-header h3 {\r\n  margin: 0 0 8px;\r\n  font-size: 16px;\r\n  font-weight: 600;\r\n}\r\n\r\n.current-info {\r\n  display: flex;\r\n  gap: 8px;\r\n}\r\n\r\n.badge {\r\n  padding: 4px 8px;\r\n  background: rgba(255, 255, 255, 0.2);\r\n  border-radius: 12px;\r\n  font-size: 12px;\r\n}\r\n\r\n.template-list {\r\n  max-height: 400px;\r\n  overflow-y: auto;\r\n  padding: 8px;\r\n}\r\n\r\n.template-item {\r\n  padding: 12px;\r\n  margin-bottom: 8px;\r\n  border: 2px solid #e0e0e0;\r\n  border-radius: 8px;\r\n  cursor: pointer;\r\n  transition: all 0.3s;\r\n}\r\n\r\n.template-item:hover {\r\n  border-color: #667eea;\r\n  background: #f5f7ff;\r\n}\r\n\r\n.template-item.active {\r\n  border-color: #667eea;\r\n  background: #e8ecff;\r\n}\r\n\r\n.template-name {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n  font-weight: 500;\r\n  color: #333;\r\n  margin-bottom: 4px;\r\n}\r\n\r\n.default-badge {\r\n  padding: 2px 6px;\r\n  background: #67c23a;\r\n  color: white;\r\n  border-radius: 10px;\r\n  font-size: 11px;\r\n}\r\n\r\n.template-desc {\r\n  font-size: 12px;\r\n  color: #666;\r\n  line-height: 1.4;\r\n}\r\n\r\n.empty-state {\r\n  padding: 40px 20px;\r\n  text-align: center;\r\n  color: #999;\r\n  font-size: 14px;\r\n}\r\n\r\n/* 滚动条样式 */\r\n.template-list::-webkit-scrollbar {\r\n  width: 6px;\r\n}\r\n\r\n.template-list::-webkit-scrollbar-track {\r\n  background: #f1f1f1;\r\n  border-radius: 3px;\r\n}\r\n\r\n.template-list::-webkit-scrollbar-thumb {\r\n  background: #ccc;\r\n  border-radius: 3px;\r\n}\r\n\r\n.template-list::-webkit-scrollbar-thumb:hover {\r\n  background: #999;\r\n}\r\n</style>\r\n"],"names":["props","__props","emit","__emit","expanded","ref","plugin","useTemplatePlugin","locale","currentLocale","inject","messages","computed","localeValue","value","getLocale","templates","allTemplates","useTemplateList","filter","t","category","device","deviceLabel","toggleExpanded","selectTemplate","templateName","watch","_createElementBlock","class","_normalizeClass","_createCommentVNode","_createElementVNode","title","actions","clearCache","onClick","_openBlock","_hoisted_2","_cache","d","_hoisted_3","_hoisted_4","_hoisted_5","_toDisplayString","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_Fragment","_renderList","template","key","name","active","currentTemplate","$event","_hoisted_11","displayName","isDefault","_hoisted_12","desktop","description","_hoisted_13","length","_hoisted_14","noTemplates"],"mappings":"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"}